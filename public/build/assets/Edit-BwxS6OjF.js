import{e as w,c as k,w as g,a as r,b as x,u as s,l as y,o as l,h as i,i as d,f as q,d as f,g as n,F as U,r as V,t as u,k as h,v as a,m as F,p as M}from"./app-ChNPiPFf.js";import{_ as j}from"./AdminLayout-D7vFcBV1.js";import"./ResponsiveNavLink-Clztr6ql.js";import"./NavLink-B4WevdvZ.js";const D={class:"py-12"},N={class:"max-w-5xl mx-auto sm:px-6 lg:px-8"},R={class:"mb-6 flex items-center gap-4"},C={key:0,class:"mb-6 bg-white overflow-hidden shadow-sm sm:rounded-lg p-6"},E={class:"relative w-full max-w-md h-48 overflow-hidden rounded-xl border border-gray-100 shadow-sm"},P=["src"],S={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},A=["value"],B={key:0,class:"mt-1 text-sm text-red-600"},L={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},T={key:0,class:"mt-1 text-sm text-red-600"},I={key:0,class:"mt-1 text-sm text-red-600"},G={key:0,class:"mt-1 text-sm text-red-600"},O={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},$={key:0,class:"mt-1 text-sm text-red-600"},z={key:0,class:"mt-1 text-sm text-red-600"},J={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},W={key:0,class:"mt-1 text-sm text-red-600"},X={key:0,class:"mt-1 text-sm text-red-600"},H={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},K={key:0,class:"mt-1 text-sm text-red-600"},Q={key:0,class:"mt-1 text-sm text-red-600"},Y={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Z={key:0,class:"mt-1 text-sm text-red-600"},ee={key:0,class:"mt-1 text-sm text-red-600"},re={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},te={key:0,class:"mt-1 text-sm text-red-600"},se={key:0,class:"mt-1 text-sm text-red-600"},oe={class:"flex items-center h-[42px]"},le={class:"border-t pt-6"},ie={class:"flex items-start gap-6"},de={key:0,class:"w-48 h-32 rounded-lg border-2 border-dashed border-blue-300 overflow-hidden bg-gray-50 flex items-center justify-center"},ue=["src"],ne={class:"flex-grow"},ae={key:0,class:"mt-1 text-sm text-red-600"},me={class:"flex items-center justify-end gap-4 pt-6 border-t"},fe=["disabled"],pe={key:0},be={key:1},_e={__name:"Edit",props:{formation:Object,categories:Array},setup(p){const m=p,b=M(null),t=w({_method:"put",category_id:m.formation.category_id,titre:m.formation.titre,slug:m.formation.slug,description_courte:m.formation.description_courte,description_complete:m.formation.description_complete,debouches:m.formation.debouches||{fr:"",en:""},prerequis:m.formation.prerequis||{fr:"",en:""},prix:m.formation.prix,duree:m.formation.duree||"",is_featured:m.formation.is_featured||!1,image_file:null}),_=c=>{const e=c.target.files[0];e&&(t.image_file=e,b.value=URL.createObjectURL(e))},v=()=>{t.post(route("admin.formations.update",m.formation.id),{onSuccess:()=>{b.value=null}})};return(c,e)=>(l(),k(j,{title:"Modifier la Formation"},{default:g(()=>[r("div",D,[r("div",N,[r("div",R,[x(s(y),{href:c.route("admin.formations.index"),class:"text-gray-600 hover:text-gray-900"},{default:g(()=>[...e[15]||(e[15]=[r("i",{class:"fas fa-arrow-left text-xl"},null,-1)])]),_:1},8,["href"]),e[16]||(e[16]=r("h1",{class:"text-3xl font-bold text-gray-900"}," Modifier la Formation ",-1))]),p.formation.image?(l(),i("div",C,[e[17]||(e[17]=r("h3",{class:"text-sm font-medium text-gray-700 mb-4"}," Image de couverture actuelle ",-1)),r("div",E,[r("img",{src:`/${p.formation.image.path}`,class:"w-full h-full object-cover",onerror:"this.src = '/img/school1.jpg'"},null,8,P)])])):d("",!0),r("div",S,[r("form",{onSubmit:q(v,["prevent"]),class:"p-6 space-y-6"},[r("div",null,[e[19]||(e[19]=r("label",{for:"category_id",class:"block text-sm font-medium text-gray-700 mb-2"},[f(" Catégorie "),r("span",{class:"text-red-500"},"*")],-1)),n(r("select",{id:"category_id","onUpdate:modelValue":e[0]||(e[0]=o=>s(t).category_id=o),class:"w-full rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:""},[e[18]||(e[18]=r("option",{value:""}," Sélectionnez une catégorie ",-1)),(l(!0),i(U,null,V(p.categories,o=>(l(),i("option",{key:o.id,value:o.id},u(o.nom.fr),9,A))),128))],512),[[h,s(t).category_id]]),s(t).errors.category_id?(l(),i("p",B,u(s(t).errors.category_id),1)):d("",!0)]),r("div",L,[r("div",null,[e[20]||(e[20]=r("label",{for:"titre_fr",class:"block text-sm font-medium text-gray-700 mb-2"},[f(" Titre (Français) "),r("span",{class:"text-red-500"},"*")],-1)),n(r("input",{id:"titre_fr","onUpdate:modelValue":e[1]||(e[1]=o=>s(t).titre.fr=o),type:"text",class:"w-full rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:""},null,512),[[a,s(t).titre.fr]]),s(t).errors["titre.fr"]?(l(),i("p",T,u(s(t).errors["titre.fr"]),1)):d("",!0)]),r("div",null,[e[21]||(e[21]=r("label",{for:"titre_en",class:"block text-sm font-medium text-gray-700 mb-2"},[f(" Titre (Anglais) "),r("span",{class:"text-red-500"},"*")],-1)),n(r("input",{id:"titre_en","onUpdate:modelValue":e[2]||(e[2]=o=>s(t).titre.en=o),type:"text",class:"w-full rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:""},null,512),[[a,s(t).titre.en]]),s(t).errors["titre.en"]?(l(),i("p",I,u(s(t).errors["titre.en"]),1)):d("",!0)])]),r("div",null,[e[22]||(e[22]=r("label",{for:"slug",class:"block text-sm font-medium text-gray-700 mb-2"},[f(" Slug "),r("span",{class:"text-red-500"},"*")],-1)),n(r("input",{id:"slug","onUpdate:modelValue":e[3]||(e[3]=o=>s(t).slug=o),type:"text",class:"w-full rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:""},null,512),[[a,s(t).slug]]),e[23]||(e[23]=r("p",{class:"mt-1 text-sm text-gray-500"}," URL-friendly identifier ",-1)),s(t).errors.slug?(l(),i("p",G,u(s(t).errors.slug),1)):d("",!0)]),r("div",O,[r("div",null,[e[24]||(e[24]=r("label",{for:"description_courte_fr",class:"block text-sm font-medium text-gray-700 mb-2"},[f(" Description courte (FR) "),r("span",{class:"text-red-500"},"*")],-1)),n(r("textarea",{id:"description_courte_fr","onUpdate:modelValue":e[4]||(e[4]=o=>s(t).description_courte.fr=o),rows:"3",class:"w-full rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:""},null,512),[[a,s(t).description_courte.fr]]),s(t).errors["description_courte.fr"]?(l(),i("p",$,u(s(t).errors["description_courte.fr"]),1)):d("",!0)]),r("div",null,[e[25]||(e[25]=r("label",{for:"description_courte_en",class:"block text-sm font-medium text-gray-700 mb-2"},[f(" Description courte (EN) "),r("span",{class:"text-red-500"},"*")],-1)),n(r("textarea",{id:"description_courte_en","onUpdate:modelValue":e[5]||(e[5]=o=>s(t).description_courte.en=o),rows:"3",class:"w-full rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:""},null,512),[[a,s(t).description_courte.en]]),s(t).errors["description_courte.en"]?(l(),i("p",z,u(s(t).errors["description_courte.en"]),1)):d("",!0)])]),r("div",J,[r("div",null,[e[26]||(e[26]=r("label",{for:"description_complete_fr",class:"block text-sm font-medium text-gray-700 mb-2"},[f(" Description complète (FR) "),r("span",{class:"text-red-500"},"*")],-1)),n(r("textarea",{id:"description_complete_fr","onUpdate:modelValue":e[6]||(e[6]=o=>s(t).description_complete.fr=o),rows:"5",class:"w-full rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:""},null,512),[[a,s(t).description_complete.fr]]),s(t).errors["description_complete.fr"]?(l(),i("p",W,u(s(t).errors["description_complete.fr"]),1)):d("",!0)]),r("div",null,[e[27]||(e[27]=r("label",{for:"description_complete_en",class:"block text-sm font-medium text-gray-700 mb-2"},[f(" Description complète (EN) "),r("span",{class:"text-red-500"},"*")],-1)),n(r("textarea",{id:"description_complete_en","onUpdate:modelValue":e[7]||(e[7]=o=>s(t).description_complete.en=o),rows:"5",class:"w-full rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500",required:""},null,512),[[a,s(t).description_complete.en]]),s(t).errors["description_complete.en"]?(l(),i("p",X,u(s(t).errors["description_complete.en"]),1)):d("",!0)])]),r("div",H,[r("div",null,[e[28]||(e[28]=r("label",{for:"debouches_fr",class:"block text-sm font-medium text-gray-700 mb-2"}," Débouchés (FR) ",-1)),n(r("textarea",{id:"debouches_fr","onUpdate:modelValue":e[8]||(e[8]=o=>s(t).debouches.fr=o),rows:"3",class:"w-full rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500"},null,512),[[a,s(t).debouches.fr]]),s(t).errors["debouches.fr"]?(l(),i("p",K,u(s(t).errors["debouches.fr"]),1)):d("",!0)]),r("div",null,[e[29]||(e[29]=r("label",{for:"debouches_en",class:"block text-sm font-medium text-gray-700 mb-2"}," Débouchés (EN) ",-1)),n(r("textarea",{id:"debouches_en","onUpdate:modelValue":e[9]||(e[9]=o=>s(t).debouches.en=o),rows:"3",class:"w-full rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500"},null,512),[[a,s(t).debouches.en]]),s(t).errors["debouches.en"]?(l(),i("p",Q,u(s(t).errors["debouches.en"]),1)):d("",!0)])]),r("div",Y,[r("div",null,[e[30]||(e[30]=r("label",{for:"prerequis_fr",class:"block text-sm font-medium text-gray-700 mb-2"}," Prérequis (FR) ",-1)),n(r("textarea",{id:"prerequis_fr","onUpdate:modelValue":e[10]||(e[10]=o=>s(t).prerequis.fr=o),rows:"3",class:"w-full rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500"},null,512),[[a,s(t).prerequis.fr]]),s(t).errors["prerequis.fr"]?(l(),i("p",Z,u(s(t).errors["prerequis.fr"]),1)):d("",!0)]),r("div",null,[e[31]||(e[31]=r("label",{for:"prerequis_en",class:"block text-sm font-medium text-gray-700 mb-2"}," Prérequis (EN) ",-1)),n(r("textarea",{id:"prerequis_en","onUpdate:modelValue":e[11]||(e[11]=o=>s(t).prerequis.en=o),rows:"3",class:"w-full rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500"},null,512),[[a,s(t).prerequis.en]]),s(t).errors["prerequis.en"]?(l(),i("p",ee,u(s(t).errors["prerequis.en"]),1)):d("",!0)])]),r("div",re,[r("div",null,[e[32]||(e[32]=r("label",{for:"prix",class:"block text-sm font-medium text-gray-700 mb-2"}," Prix (XAF) ",-1)),n(r("input",{id:"prix","onUpdate:modelValue":e[12]||(e[12]=o=>s(t).prix=o),type:"number",class:"w-full rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500",min:"0"},null,512),[[a,s(t).prix,void 0,{number:!0}]]),s(t).errors.prix?(l(),i("p",te,u(s(t).errors.prix),1)):d("",!0)]),r("div",null,[e[33]||(e[33]=r("label",{for:"duree",class:"block text-sm font-medium text-gray-700 mb-2"}," Durée ",-1)),n(r("input",{id:"duree","onUpdate:modelValue":e[13]||(e[13]=o=>s(t).duree=o),type:"text",class:"w-full rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500",placeholder:"3 mois"},null,512),[[a,s(t).duree]]),s(t).errors.duree?(l(),i("p",se,u(s(t).errors.duree),1)):d("",!0)]),r("div",null,[e[35]||(e[35]=r("label",{for:"is_featured",class:"block text-sm font-medium text-gray-700 mb-2"}," Mise en avant ",-1)),r("div",oe,[n(r("input",{id:"is_featured","onUpdate:modelValue":e[14]||(e[14]=o=>s(t).is_featured=o),type:"checkbox",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[F,s(t).is_featured]]),e[34]||(e[34]=r("label",{for:"is_featured",class:"ml-2 text-sm text-gray-600"}," Afficher sur la page d'accueil ",-1))])])]),r("div",le,[e[38]||(e[38]=r("h3",{class:"text-lg font-medium text-gray-900 mb-4"}," Image de couverture ",-1)),r("div",ie,[b.value?(l(),i("div",de,[r("img",{src:b.value,class:"w-full h-full object-cover"},null,8,ue)])):d("",!0),r("div",ne,[e[36]||(e[36]=r("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Choisir une nouvelle image",-1)),r("input",{type:"file",onInput:_,accept:"image/*",class:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"},null,32),e[37]||(e[37]=r("p",{class:"mt-2 text-xs text-gray-500"}," JPG, PNG, WebP acceptés. Max 2Mo. ",-1)),s(t).errors.image_file?(l(),i("p",ae,u(s(t).errors.image_file),1)):d("",!0)])])]),r("div",me,[x(s(y),{href:c.route("admin.formations.index"),class:"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors"},{default:g(()=>[...e[39]||(e[39]=[f(" Annuler ",-1)])]),_:1},8,["href"]),r("button",{type:"submit",disabled:s(t).processing,class:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[s(t).processing?(l(),i("span",pe,[...e[40]||(e[40]=[r("i",{class:"fas fa-spinner fa-spin mr-2"},null,-1),f(" Mise à jour... ",-1)])])):(l(),i("span",be,[...e[41]||(e[41]=[r("i",{class:"fas fa-save mr-2"},null,-1),f(" Mettre à jour ",-1)])]))],8,fe)])],32)])])])]),_:1}))}};export{_e as default};
