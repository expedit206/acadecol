import{e as E,c as N,w as k,a as e,o as m,h as c,t as n,i as f,d as v,n as _,f as A,b as o,g as x,u as l,F as P,r as B,k as y,v as U,p as q,x as D}from"./app-C9bmAxfQ.js";import{_ as $}from"./PublicLayout-ytzN0xQQ.js";import{_ as u,b as g,a as p}from"./InputError-CidazL7g.js";import{P as F}from"./PrimaryButton-DHcU8Ge2.js";import"./NavLink-C92gqUGz.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SecondaryButton-B_xRP-gh.js";import"./Checkbox-BVSNCHxf.js";const L={class:"py-12 bg-gray-50 min-h-screen"},T={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},z={key:0,class:"mb-6 bg-green-100 border-l-4 border-green-500 text-green-700 p-4 rounded shadow-sm"},O={key:1,class:"mb-4"},G={key:2,class:"bg-white shadow-xl rounded-lg overflow-hidden border border-gray-200"},W={class:"bg-blue-600 text-white p-6 sm:p-10 flex flex-col sm:flex-row justify-between items-start sm:items-center relative overflow-hidden"},I={class:"relative z-10 w-full"},J={class:"flex justify-between items-start"},j={class:"bg-white text-blue-800 px-4 py-2 rounded-lg font-mono font-bold text-lg shadow-md hidden sm:block"},H={class:"bg-gray-100 px-6 py-3 border-b border-gray-200 flex flex-col sm:flex-row justify-between items-center gap-4"},K={class:"sm:hidden font-mono font-bold text-gray-700 text-lg"},Q={class:"flex items-center space-x-4"},X={key:0,class:"print:hidden"},Y={class:"p-6 sm:p-10 grid grid-cols-1 md:grid-cols-2 gap-8 sm:gap-12"},Z={class:"space-y-4"},ee={class:"text-lg font-bold text-gray-900"},te={class:"grid grid-cols-2 gap-4"},se={class:"text-gray-800 font-medium"},le={class:"text-gray-800 font-medium"},oe={class:"text-gray-800 font-medium"},re={class:"space-y-4"},ae={class:"text-gray-800 font-medium"},ie={class:"text-gray-800 font-medium"},ne={class:"bg-blue-50 p-4 rounded-lg border border-blue-100 mb-6"},de={class:"text-blue-800 font-bold text-lg leading-tight"},ue={class:"space-y-4"},me={class:"text-gray-800 font-medium"},ge={key:0},ce={class:"text-gray-800 font-medium"},pe={key:0,class:"mt-8"},be={class:"text-gray-600 italic text-sm bg-gray-50 p-3 rounded"},fe={class:"bg-gray-50 px-6 py-4 border-t border-gray-200 text-center sm:text-right"},xe={class:"text-xs text-gray-400"},ve={key:3,class:"bg-white shadow-lg rounded-lg overflow-hidden"},ye={class:"p-6"},we=["value"],he={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ke={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},_e={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Re={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ve={class:"flex items-center justify-end border-t border-gray-100 pt-4"},Ue={__name:"View",props:{preRegistration:Object,formations:Array},setup(i){const d=i,b=q(!1),R=D(()=>d.preRegistration.status==="pending"),s=E({formation_id:d.preRegistration.formation_id,last_name:d.preRegistration.last_name,first_name:d.preRegistration.first_name,email:d.preRegistration.email,phone:d.preRegistration.phone,address:d.preRegistration.address,birth_date:d.preRegistration.birth_date,gender:d.preRegistration.gender,education_level:d.preRegistration.education_level,last_school:d.preRegistration.last_school,message:d.preRegistration.message}),V=()=>{s.put(route("pre-registration.update",d.preRegistration.id),{onSuccess:()=>{b.value=!1}})},C=a=>{switch(a){case"pending":return"En attente";case"validated":return"Validée";case"cancelled":return"Annulée";default:return a}},S=a=>{switch(a){case"pending":return"bg-yellow-100 text-yellow-800";case"validated":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},w=a=>a?new Date(a).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}):"",h=a=>{if(!a)return"";if(typeof a=="string")try{const t=JSON.parse(a);return t.fr||t.en||a}catch{return a}return a.fr||a.en||""},M=a=>a?h(a.titre):"Formation inconnue";return(a,t)=>(m(),N($,null,{default:k(()=>[e("div",L,[e("div",T,[a.$page.props.flash?.success?(m(),c("div",z,[t[14]||(t[14]=e("p",{class:"font-bold"},"Succès",-1)),e("p",null,n(a.$page.props.flash.success),1)])):f("",!0),b.value?(m(),c("div",O,[e("button",{onClick:t[0]||(t[0]=r=>b.value=!1),class:"text-blue-600 hover:text-blue-800 font-medium flex items-center"},[...t[15]||(t[15]=[e("i",{class:"fas fa-arrow-left mr-2"},null,-1),v(" Retour à la fiche ",-1)])])])):f("",!0),b.value?(m(),c("div",ve,[t[37]||(t[37]=e("div",{class:"p-6 border-b border-gray-200"},[e("h2",{class:"text-xl font-bold text-gray-800"}," Modifier mes informations "),e("p",{class:"text-sm text-gray-500"}," Mettez à jour les informations de votre dossier. Certains champs comme l'email ne sont pas modifiables. ")],-1)),e("div",ye,[e("form",{onSubmit:A(V,["prevent"]),class:"space-y-6"},[e("div",null,[o(u,{for:"formation_id",value:"Formation souhaitée"}),x(e("select",{id:"formation_id","onUpdate:modelValue":t[2]||(t[2]=r=>l(s).formation_id=r),class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",required:""},[t[33]||(t[33]=e("option",{value:""}," Sélectionnez une formation ",-1)),(m(!0),c(P,null,B(i.formations,r=>(m(),c("option",{key:r.id,value:r.id},n(h(r.titre)),9,we))),128))],512),[[y,l(s).formation_id]]),o(g,{message:l(s).errors.formation_id,class:"mt-2"},null,8,["message"])]),e("div",he,[e("div",null,[o(u,{for:"last_name",value:"Nom"}),o(p,{id:"last_name",type:"text",class:"mt-1 block w-full",modelValue:l(s).last_name,"onUpdate:modelValue":t[3]||(t[3]=r=>l(s).last_name=r),required:""},null,8,["modelValue"]),o(g,{message:l(s).errors.last_name,class:"mt-2"},null,8,["message"])]),e("div",null,[o(u,{for:"first_name",value:"Prénom"}),o(p,{id:"first_name",type:"text",class:"mt-1 block w-full",modelValue:l(s).first_name,"onUpdate:modelValue":t[4]||(t[4]=r=>l(s).first_name=r),required:""},null,8,["modelValue"]),o(g,{message:l(s).errors.first_name,class:"mt-2"},null,8,["message"])])]),e("div",ke,[e("div",null,[o(u,{for:"email",value:"Email (Non modifiable)"}),o(p,{id:"email",type:"email",class:"mt-1 block w-full bg-gray-100 text-gray-500 cursor-not-allowed",modelValue:l(s).email,"onUpdate:modelValue":t[5]||(t[5]=r=>l(s).email=r),disabled:""},null,8,["modelValue"])]),e("div",null,[o(u,{for:"phone",value:"Téléphone (WhatsApp)"}),o(p,{id:"phone",type:"tel",class:"mt-1 block w-full",modelValue:l(s).phone,"onUpdate:modelValue":t[6]||(t[6]=r=>l(s).phone=r),required:""},null,8,["modelValue"]),o(g,{message:l(s).errors.phone,class:"mt-2"},null,8,["message"])])]),e("div",_e,[e("div",null,[o(u,{for:"birth_date",value:"Date de naissance"}),o(p,{id:"birth_date",type:"date",class:"mt-1 block w-full",modelValue:l(s).birth_date,"onUpdate:modelValue":t[7]||(t[7]=r=>l(s).birth_date=r),required:""},null,8,["modelValue"]),o(g,{message:l(s).errors.birth_date,class:"mt-2"},null,8,["message"])]),e("div",null,[o(u,{for:"gender",value:"Sexe"}),x(e("select",{id:"gender","onUpdate:modelValue":t[8]||(t[8]=r=>l(s).gender=r),class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",required:""},[...t[34]||(t[34]=[e("option",{value:"M"},"Masculin",-1),e("option",{value:"F"},"Féminin",-1)])],512),[[y,l(s).gender]]),o(g,{message:l(s).errors.gender,class:"mt-2"},null,8,["message"])])]),e("div",null,[o(u,{for:"address",value:"Adresse / Ville"}),o(p,{id:"address",type:"text",class:"mt-1 block w-full",modelValue:l(s).address,"onUpdate:modelValue":t[9]||(t[9]=r=>l(s).address=r),required:""},null,8,["modelValue"]),o(g,{message:l(s).errors.address,class:"mt-2"},null,8,["message"])]),e("div",Re,[e("div",null,[o(u,{for:"education_level",value:"Niveau d'étude"}),x(e("select",{id:"education_level","onUpdate:modelValue":t[10]||(t[10]=r=>l(s).education_level=r),class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",required:""},[...t[35]||(t[35]=[e("option",{value:"CEP"},"CEP / FSLC",-1),e("option",{value:"BEPC"}," BEPC / GCE O Level ",-1),e("option",{value:"Probatoire"}," Probatoire ",-1),e("option",{value:"Baccalauréat"}," Baccalauréat / GCE A Level ",-1),e("option",{value:"Licence"}," Licence / Bachelor ",-1),e("option",{value:"Master"},"Master",-1),e("option",{value:"Autre"},"Autre",-1)])],512),[[y,l(s).education_level]]),o(g,{message:l(s).errors.education_level,class:"mt-2"},null,8,["message"])]),e("div",null,[o(u,{for:"last_school",value:"Dernier établissement"}),o(p,{id:"last_school",type:"text",class:"mt-1 block w-full",modelValue:l(s).last_school,"onUpdate:modelValue":t[11]||(t[11]=r=>l(s).last_school=r)},null,8,["modelValue"]),o(g,{message:l(s).errors.last_school,class:"mt-2"},null,8,["message"])])]),e("div",null,[o(u,{for:"message",value:"Message (Optionnel)"}),x(e("textarea",{id:"message","onUpdate:modelValue":t[12]||(t[12]=r=>l(s).message=r),class:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",rows:"3"},null,512),[[U,l(s).message]]),o(g,{message:l(s).errors.message,class:"mt-2"},null,8,["message"])]),e("div",Ve,[e("button",{type:"button",onClick:t[13]||(t[13]=r=>b.value=!1),class:"mr-4 text-gray-600 hover:text-gray-900 font-medium"}," Annuler "),o(F,{class:_({"opacity-25":l(s).processing}),disabled:l(s).processing},{default:k(()=>[...t[36]||(t[36]=[v(" Enregistrer les modifications ",-1)])]),_:1},8,["class","disabled"])])],32)])])):(m(),c("div",G,[e("div",W,[e("div",I,[e("div",J,[t[16]||(t[16]=e("div",null,[e("h1",{class:"text-2xl sm:text-3xl font-bold uppercase tracking-wider border-b-2 border-blue-400 pb-2 mb-2 inline-block"}," Fiche de Pré-inscription "),e("p",{class:"text-blue-100 mt-1 text-sm sm:text-base"}," Année Académique 2024-2025 ")],-1)),e("div",j," N° "+n(i.preRegistration.registration_number),1)])]),t[17]||(t[17]=e("i",{class:"fas fa-file-contract absolute -right-6 -bottom-6 text-9xl text-blue-700 opacity-20 transform rotate-12 z-0"},null,-1))]),e("div",H,[e("div",K," N° "+n(i.preRegistration.registration_number),1),e("div",Q,[t[18]||(t[18]=e("span",{class:"mr-2 text-gray-600 font-medium hidden sm:inline"},"Statut :",-1)),e("span",{class:_([S(i.preRegistration.status),"px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide"])},n(C(i.preRegistration.status)),3)]),R.value?(m(),c("div",X,[e("button",{onClick:t[1]||(t[1]=r=>b.value=!0),class:"text-blue-600 hover:text-blue-800 font-medium text-sm flex items-center bg-white px-3 py-1 rounded border border-blue-200 shadow-sm hover:shadow"},[...t[19]||(t[19]=[e("i",{class:"fas fa-edit mr-2"},null,-1),v(" Modifier mes informations ",-1)])])])):f("",!0)]),e("div",Y,[e("div",null,[t[26]||(t[26]=e("h3",{class:"text-gray-400 text-xs font-bold uppercase tracking-widest mb-4 border-b pb-1"}," Identité du Candidat ",-1)),e("div",Z,[e("div",null,[t[20]||(t[20]=e("label",{class:"block text-xs text-gray-500 uppercase"},"Nom & Prénom",-1)),e("p",ee,n(i.preRegistration.last_name)+" "+n(i.preRegistration.first_name),1)]),e("div",te,[e("div",null,[t[21]||(t[21]=e("label",{class:"block text-xs text-gray-500 uppercase"},"Date de naissance",-1)),e("p",se,n(w(i.preRegistration.birth_date)),1)]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-xs text-gray-500 uppercase"},"Sexe",-1)),e("p",le,n(i.preRegistration.gender==="M"?"Masculin":"Féminin"),1)])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-xs text-gray-500 uppercase"},"Adresse / Ville",-1)),e("p",oe,n(i.preRegistration.address),1)])]),t[27]||(t[27]=e("h3",{class:"text-gray-400 text-xs font-bold uppercase tracking-widest mb-4 border-b pb-1 mt-8"}," Contact ",-1)),e("div",re,[e("div",null,[t[24]||(t[24]=e("label",{class:"block text-xs text-gray-500 uppercase"},"Email",-1)),e("p",ae,n(i.preRegistration.email),1)]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-xs text-gray-500 uppercase"},"Téléphone (WhatsApp)",-1)),e("p",ie,n(i.preRegistration.phone),1)])])]),e("div",null,[t[31]||(t[31]=e("h3",{class:"text-gray-400 text-xs font-bold uppercase tracking-widest mb-4 border-b pb-1"}," Formation Sollicitée ",-1)),e("div",ne,[e("p",de,n(M(i.preRegistration.formation)),1)]),t[32]||(t[32]=e("h3",{class:"text-gray-400 text-xs font-bold uppercase tracking-widest mb-4 border-b pb-1"}," Parcours Scolaire ",-1)),e("div",ue,[e("div",null,[t[28]||(t[28]=e("label",{class:"block text-xs text-gray-500 uppercase"},"Niveau d'étude",-1)),e("p",me,n(i.preRegistration.education_level),1)]),i.preRegistration.last_school?(m(),c("div",ge,[t[29]||(t[29]=e("label",{class:"block text-xs text-gray-500 uppercase"},"Dernier Établissement",-1)),e("p",ce,n(i.preRegistration.last_school),1)])):f("",!0)]),i.preRegistration.message?(m(),c("div",pe,[t[30]||(t[30]=e("h3",{class:"text-gray-400 text-xs font-bold uppercase tracking-widest mb-4 border-b pb-1"}," Message / Note ",-1)),e("p",be,' "'+n(i.preRegistration.message)+'" ',1)])):f("",!0)])]),e("div",fe,[e("p",xe," Fiche créée le "+n(w(i.preRegistration.created_at)),1)])]))])])]),_:1}))}};export{Ue as default};
